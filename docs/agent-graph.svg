<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="520" viewBox="0 0 1200 520">
  <defs>
    <style>
      .box { fill: #f8fafc; stroke: #4f46e5; stroke-width: 2; rx: 10; }
      .title { font: bold 18px Arial, sans-serif; fill: #111827; }
      .label { font: 14px Arial, sans-serif; fill: #111827; }
      .small { font: 12px Arial, sans-serif; fill: #374151; }
      .arrow { stroke: #111827; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#111827" />
    </marker>
  </defs>

  <rect x="20" y="20" width="1160" height="480" fill="#ffffff" stroke="#e5e7eb" />
  <text x="40" y="55" class="title">FinSight LangGraph Agent Flow</text>

  <rect class="box" x="60" y="90" width="180" height="70" />
  <text x="80" y="120" class="label">supervisor</text>
  <text x="80" y="140" class="small">route decision</text>

  <rect class="box" x="300" y="90" width="180" height="70" />
  <text x="320" y="120" class="label">intake_guard</text>
  <text x="320" y="140" class="small">validate profile</text>

  <rect class="box" x="540" y="90" width="180" height="70" />
  <text x="560" y="120" class="label">frame</text>
  <text x="560" y="140" class="small">LLM framing</text>

  <rect class="box" x="780" y="90" width="180" height="70" />
  <text x="800" y="120" class="label">web</text>
  <text x="800" y="140" class="small">news search</text>

  <rect class="box" x="1020" y="90" width="140" height="70" />
  <text x="1040" y="120" class="label">yfinance</text>
  <text x="1040" y="140" class="small">price + metrics</text>

  <rect class="box" x="240" y="220" width="180" height="70" />
  <text x="260" y="250" class="label">score</text>
  <text x="260" y="270" class="small">FinSight score</text>

  <rect class="box" x="480" y="220" width="180" height="70" />
  <text x="500" y="250" class="label">draft</text>
  <text x="500" y="270" class="small">analysis writer</text>

  <rect class="box" x="720" y="220" width="180" height="70" />
  <text x="740" y="250" class="label">validate</text>
  <text x="740" y="270" class="small">quality checks</text>

  <rect class="box" x="960" y="220" width="180" height="70" />
  <text x="980" y="250" class="label">on_fail</text>
  <text x="980" y="270" class="small">retry routing</text>

  <rect class="box" x="540" y="360" width="180" height="70" />
  <text x="560" y="390" class="label">END</text>
  <text x="560" y="410" class="small">response to UI</text>

  <path class="arrow" d="M240 125 L300 125" />
  <path class="arrow" d="M420 160 L540 125" />
  <path class="arrow" d="M720 125 L780 125" />
  <path class="arrow" d="M960 125 L1020 125" />

  <path class="arrow" d="M1110 160 L1110 220" />
  <path class="arrow" d="M1110 220 L420 255" />
  <path class="arrow" d="M420 255 L480 255" />
  <path class="arrow" d="M660 255 L720 255" />
  <path class="arrow" d="M900 255 L960 255" />
  <path class="arrow" d="M1050 290 L1050 340 L630 340 L630 360" />

  <path class="arrow" d="M630 290 L630 360" />
</svg>
